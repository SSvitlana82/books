{"version":3,"file":"commonHelpers.js","sources":["../src/js/header.js","../src/js/categories.js","../src/js/modal.js","../src/js/book-list.js"],"sourcesContent":["import { refs } from './modules/refs';\nrefs.boorgerMenuBtn.addEventListener('click', onBoorgerMenuBtnClick);\nfunction onBoorgerMenuBtnClick(e) {\n  refs.boorgerMenuBackdrop.classList.remove('hidden');\n}\n","import {\n  getCategories,\n  getBooksByCategory,\n  getPopularBooks,\n} from './modules/books-api';\nimport { refs } from './modules/refs';\nimport {\n  categoriesTemplate,\n  booksTemplate,\n  popularBooksTemplate,\n} from './modules/render-functions';\n\nrefs.categoryList.addEventListener('click', onCategoryClick);\ngetCategories().then(value => {\n  value.unshift({ list_name: 'ALL CATEGORIES' });\n  const markup = categoriesTemplate(value);\n\n  refs.categoryList.innerHTML = markup;\n});\n\nfunction onCategoryClick(e) {\n  if (e.target === e.currentTarget) {\n    return;\n  }\n\n  if (e.target.textContent === 'ALL CATEGORIES') {\n    renderTopBooks();\n    refs.bookList.classList.remove('book-list-seemore');\n    return;\n  }\n  refs.bookList.classList.add('book-list-seemore');\n  getBooksByCategory(e.target.textContent).then(value => {\n    if (value.length === 0) {\n      return alert('Noooooooo');\n    }\n    const markup = booksTemplate(value);\n    refs.bookList.innerHTML = markup;\n  });\n}\nfunction renderTopBooks() {\n  getPopularBooks().then(value => {\n    if (value.length === 0) {\n      return alert('Noooooooo');\n    }\n\n    const markup = popularBooksTemplate(value);\n    refs.bookList.innerHTML = markup;\n  });\n}\nrenderTopBooks();\n","import { updateModalMarkup } from './modules/storage';\nimport { getBookInfo } from './modules/books-api';\n/* import { modalLinksTemplate } from './modules/render-functions'; */\nimport { refs } from './modules/refs';\nimport { modalTemplate } from './modules/render-functions';\n\nexport async function openModal(idBook) {\n  const book = await getBookInfo(idBook);\n  const markupBook = modalTemplate(book);\n  refs.modal.content.innerHTML = markupBook;\n  showModal();\n  updateModalMarkup(idBook);\n  refs.modal.shopListBtn.setAttribute('data-id', idBook);\n}\nexport function showModal() {\n  refs.modal.mainBackdrop.classList.remove('hidden');\n  document.body.classList.add('hide-scroll');\n  window.addEventListener('keydown', onModalEsc);\n}\nexport function hideModal() {\n  refs.modal.mainBackdrop.classList.add('hidden');\n  document.body.classList.remove('hide-scroll');\n  window.removeEventListener('keydown', onModalEsc);\n}\nrefs.modal.mainBackdrop.addEventListener('click', onCloseModal);\n\nfunction onCloseModal(e) {\n  if (e.target === e.currentTarget) {\n    hideModal();\n    return;\n  }\n}\n\nfunction onModalEsc(i) {\n  if (i.code === 'Escape') {\n    hideModal();\n    return;\n  }\n}\n","import { getBooksByCategory, getPopularBooks } from './modules/books-api';\nimport { refs } from './modules/refs';\nimport { booksTemplate } from './modules/render-functions';\nimport { openModal } from './modal';\n\nrefs.bookList.addEventListener('click', onBtnSeeMoreCLick);\nfunction onBtnSeeMoreCLick(e) {\n  if (e.target.nodeName !== 'BUTTON') {\n    return;\n  }\n  refs.bookList.classList.add('book-list-seemore');\n\n  getBooksByCategory(e.target.dataset.top).then(value => {\n    if (value.length === 0) {\n      return alert('Noooooooo');\n    }\n    const markup = booksTemplate(value);\n    refs.bookList.innerHTML = markup;\n  });\n}\nrefs.bookList.addEventListener('click', onBookClick);\nfunction onBookClick(eventBook) {\n  if (eventBook.tagret === eventBook.currentTarget) {\n    return;\n  }\n  if (eventBook.target.nodeName === 'BUTTON') {\n    return;\n  }\n  const liElem = eventBook.target.closest('.book-item');\n\n  const id = liElem.dataset.id;\n  openModal(id);\n}\n"],"names":["refs","onBoorgerMenuBtnClick","e","onCategoryClick","getCategories","value","markup","categoriesTemplate","renderTopBooks","getBooksByCategory","booksTemplate","getPopularBooks","popularBooksTemplate","openModal","idBook","book","getBookInfo","markupBook","modalTemplate","showModal","updateModalMarkup","onModalEsc","hideModal","onCloseModal","i","onBtnSeeMoreCLick","onBookClick","eventBook","id"],"mappings":"mJACAA,EAAK,eAAe,iBAAiB,QAASC,CAAqB,EACnE,SAASA,EAAsBC,EAAG,CAChCF,EAAK,oBAAoB,UAAU,OAAO,QAAQ,CACpD,CCQAA,EAAK,aAAa,iBAAiB,QAASG,CAAe,EAC3DC,EAAe,EAAC,KAAKC,GAAS,CAC5BA,EAAM,QAAQ,CAAE,UAAW,gBAAkB,CAAA,EAC7C,MAAMC,EAASC,EAAmBF,CAAK,EAEvCL,EAAK,aAAa,UAAYM,CAChC,CAAC,EAED,SAASH,EAAgBD,EAAG,CAC1B,GAAIA,EAAE,SAAWA,EAAE,cAInB,IAAIA,EAAE,OAAO,cAAgB,iBAAkB,CAC7CM,IACAR,EAAK,SAAS,UAAU,OAAO,mBAAmB,EAClD,MACD,CACDA,EAAK,SAAS,UAAU,IAAI,mBAAmB,EAC/CS,EAAmBP,EAAE,OAAO,WAAW,EAAE,KAAKG,GAAS,CACrD,GAAIA,EAAM,SAAW,EACnB,OAAO,MAAM,WAAW,EAE1B,MAAMC,EAASI,EAAcL,CAAK,EAClCL,EAAK,SAAS,UAAYM,CAC9B,CAAG,EACH,CACA,SAASE,GAAiB,CACxBG,EAAiB,EAAC,KAAKN,GAAS,CAC9B,GAAIA,EAAM,SAAW,EACnB,OAAO,MAAM,WAAW,EAG1B,MAAMC,EAASM,EAAqBP,CAAK,EACzCL,EAAK,SAAS,UAAYM,CAC9B,CAAG,CACH,CACAE,EAAgB,EC3CT,eAAeK,EAAUC,EAAQ,CACtC,MAAMC,EAAO,MAAMC,EAAYF,CAAM,EAC/BG,EAAaC,EAAcH,CAAI,EACrCf,EAAK,MAAM,QAAQ,UAAYiB,EAC/BE,IACAC,EAAkBN,CAAM,EACxBd,EAAK,MAAM,YAAY,aAAa,UAAWc,CAAM,CACvD,CACO,SAASK,GAAY,CAC1BnB,EAAK,MAAM,aAAa,UAAU,OAAO,QAAQ,EACjD,SAAS,KAAK,UAAU,IAAI,aAAa,EACzC,OAAO,iBAAiB,UAAWqB,CAAU,CAC/C,CACO,SAASC,GAAY,CAC1BtB,EAAK,MAAM,aAAa,UAAU,IAAI,QAAQ,EAC9C,SAAS,KAAK,UAAU,OAAO,aAAa,EAC5C,OAAO,oBAAoB,UAAWqB,CAAU,CAClD,CACArB,EAAK,MAAM,aAAa,iBAAiB,QAASuB,CAAY,EAE9D,SAASA,EAAarB,EAAG,CACvB,GAAIA,EAAE,SAAWA,EAAE,cAAe,CAChCoB,IACA,MACD,CACH,CAEA,SAASD,EAAWG,EAAG,CACrB,GAAIA,EAAE,OAAS,SAAU,CACvBF,IACA,MACD,CACH,CCjCAtB,EAAK,SAAS,iBAAiB,QAASyB,CAAiB,EACzD,SAASA,EAAkBvB,EAAG,CACxBA,EAAE,OAAO,WAAa,WAG1BF,EAAK,SAAS,UAAU,IAAI,mBAAmB,EAE/CS,EAAmBP,EAAE,OAAO,QAAQ,GAAG,EAAE,KAAKG,GAAS,CACrD,GAAIA,EAAM,SAAW,EACnB,OAAO,MAAM,WAAW,EAE1B,MAAMC,EAASI,EAAcL,CAAK,EAClCL,EAAK,SAAS,UAAYM,CAC9B,CAAG,EACH,CACAN,EAAK,SAAS,iBAAiB,QAAS0B,CAAW,EACnD,SAASA,EAAYC,EAAW,CAI9B,GAHIA,EAAU,SAAWA,EAAU,eAG/BA,EAAU,OAAO,WAAa,SAChC,OAIF,MAAMC,EAFSD,EAAU,OAAO,QAAQ,YAAY,EAElC,QAAQ,GAC1Bd,EAAUe,CAAE,CACd"}