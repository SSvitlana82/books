{"version":3,"file":"commonHelpers.js","sources":["../src/js/header.js","../src/js/modules/books-api.js","../src/js/categories.js","../src/js/modules/storage.js","../src/js/modal.js","../src/js/book-list.js","../src/js/donations.js"],"sourcesContent":["import { refs } from './modules/refs';\nrefs.boorgerMenuBtn.addEventListener('click', onBoorgerMenuBtnClick);\nfunction onBoorgerMenuBtnClick(e) {\n  refs.boorgerMenuBackdrop.classList.remove('hidden');\n}\nconsole.log('hello');\n","import axios from 'axios';\nconst BASE = 'https://books-backend.p.goit.global/books';\n\nexport async function getCategories() {\n  const URL = `${BASE}/category-list`;\n  const response = await axios.get(URL);\n  return response.data;\n}\nexport async function getPopularBooks() {\n  const URL = `${BASE}/top-books`;\n  const response = await axios.get(URL);\n  return response.data;\n}\nexport async function getBooksByCategory(selectedCategory) {\n  selectedCategory = selectedCategory.trim();\n  const params = { category: selectedCategory };\n  const URL = `${BASE}/category`;\n  const response = await axios.get(URL, { params });\n  return response.data;\n}\nexport async function getBookInfo(bookId) {\n  bookId = bookId.trim();\n  const URL = `${BASE}/${bookId}`;\n  const response = await axios.get(URL);\n  return response.data;\n}\n","import {\n  getCategories,\n  getBooksByCategory,\n  getPopularBooks,\n} from './modules/books-api';\nimport { refs } from './modules/refs';\nimport {\n  categoriesTemplate,\n  booksTemplate,\n  popularBooksTemplate,\n} from './modules/render-functions';\n\nrefs.categoryList.addEventListener('click', onCategoryClick);\ngetCategories().then(value => {\n  value.unshift({ list_name: 'ALL CATEGORIES' });\n  const markup = categoriesTemplate(value);\n  console.log(markup);\n  refs.categoryList.innerHTML = markup;\n});\n\nfunction onCategoryClick(e) {\n  console.log(e.target);\n  console.log(e.currentTarget);\n  if (e.target === e.currentTarget) {\n    return;\n  }\n\n  if (e.target.textContent === 'ALL CATEGORIES') {\n    renderTopBooks();\n    refs.bookList.classList.remove('book-list-seemore');\n    return;\n  }\n  refs.bookList.classList.add('book-list-seemore');\n  getBooksByCategory(e.target.textContent).then(value => {\n    console.log(value);\n    if (value.length === 0) {\n      return alert('Noooooooo');\n    }\n    const markup = booksTemplate(value);\n    refs.bookList.innerHTML = markup;\n  });\n}\nfunction renderTopBooks() {\n  getPopularBooks().then(value => {\n    if (value.length === 0) {\n      return alert('Noooooooo');\n    }\n    console.log(value);\n    const markup = popularBooksTemplate(value);\n    refs.bookList.innerHTML = markup;\n  });\n}\nrenderTopBooks();\n","import { refs } from './refs';\nimport { getBookInfo } from './books-api';\n\nrefs.modal.shopListBtn.addEventListener('click', onShopListBtnClick);\nconst shopList = JSON.parse(localStorage.getItem('shopListStorage')) || [];\n\nasync function onShopListBtnClick(event) {\n  const bookId = event.target.getAttribute('data-id');\n  const bookInShop = shopList.some(book => {\n    return book._id === bookId;\n  });\n  console.log(bookInShop);\n\n  if (bookInShop === false) {\n    const book = await getBookInfo(bookId);\n    shopList.push(book);\n    localStorage.setItem('shopListStorage', JSON.stringify(shopList));\n  } else {\n    const indexBook = shopList.findIndex(book => {\n      return book._id === bookId;\n    });\n    shopList.splice(indexBook, 1);\n    localStorage.setItem('shopListStorage', JSON.stringify(shopList));\n  }\n  updateModalMarkup(bookId);\n}\nexport function updateModalMarkup(bookId) {\n  const bookInShop = shopList.some(book => {\n    return book._id === bookId;\n  });\n  console.log(bookInShop);\n\n  if (bookInShop === false) {\n    refs.modal.shopListBtn.textContent = 'ADD TO SHOPPING LIST';\n    refs.modal.message.classList.add('hidden');\n  } else {\n    refs.modal.shopListBtn.textContent = 'remove';\n    refs.modal.message.classList.remove('hidden');\n  }\n}\n","import { updateModalMarkup } from './modules/storage';\nimport { getBookInfo } from './modules/books-api';\n/* import { modalLinksTemplate } from './modules/render-functions'; */\nimport { refs } from './modules/refs';\nimport { modalTemplate } from './modules/render-functions';\n\nexport async function openModal(idBook) {\n  const book = await getBookInfo(idBook);\n  const markupBook = modalTemplate(book);\n  refs.modal.content.innerHTML = markupBook;\n  showModal();\n  updateModalMarkup(idBook);\n  refs.modal.shopListBtn.setAttribute('data-id', idBook);\n}\nexport function showModal() {\n  refs.modal.mainBackdrop.classList.remove('hidden');\n  document.body.classList.add('hide-scroll');\n  window.addEventListener('keydown', onModalEsc);\n}\nexport function hideModal() {\n  refs.modal.mainBackdrop.classList.add('hidden');\n  document.body.classList.remove('hide-scroll');\n  window.removeEventListener('keydown', onModalEsc);\n}\nrefs.modal.mainBackdrop.addEventListener('click', onCloseModal);\nconsole.log('hello');\nfunction onCloseModal(e) {\n  if (e.target === e.currentTarget) {\n    hideModal();\n    return;\n  }\n}\n\nfunction onModalEsc(i) {\n  console.log(i);\n  if (i.code === 'Escape') {\n    hideModal();\n    return;\n  }\n}\n","import { getBooksByCategory, getPopularBooks } from './modules/books-api';\nimport { refs } from './modules/refs';\nimport { booksTemplate } from './modules/render-functions';\nimport { openModal } from './modal';\n\nrefs.bookList.addEventListener('click', onBtnSeeMoreCLick);\nfunction onBtnSeeMoreCLick(e) {\n  if (e.target.nodeName !== 'BUTTON') {\n    return;\n  }\n  refs.bookList.classList.add('book-list-seemore');\n\n  getBooksByCategory(e.target.dataset.top).then(value => {\n    if (value.length === 0) {\n      return alert('Noooooooo');\n    }\n    const markup = booksTemplate(value);\n    refs.bookList.innerHTML = markup;\n  });\n}\nrefs.bookList.addEventListener('click', onBookClick);\nfunction onBookClick(eventBook) {\n  if (eventBook.tagret === eventBook.currentTarget) {\n    return;\n  }\n  if (eventBook.target.nodeName === 'BUTTON') {\n    return;\n  }\n  const liElem = eventBook.target.closest('.book-item');\n\n  const id = liElem.dataset.id;\n  openModal(id);\n}\n","import { refs } from './modules/refs';\n/* refs.donations.addEventListener(); */\n\nimport { supportsTemplate } from './modules/render-functions';\nconst support = [\n  {\n    title: 'Save the Children',\n    url: 'https://www.savethechildren.net/what-we-do/emergencies/ukraine-crisis',\n    img: 'icon-ukraine',\n  },\n  {\n    title: 'Project HOPE',\n    url: 'https://www.projecthope.org/country/ukraine/',\n    img: 'icon-ukraine',\n  },\n  {\n    title: 'UNITED24',\n    url: 'https://u24.gov.ua/uk',\n    img: 'icon-ukraine',\n  },\n  {\n    title: 'International Medical Corps',\n    url: 'https://internationalmedicalcorps.org/country/ukraine/',\n    img: 'icon-ukraine',\n  },\n  {\n    title: 'Medicins Sans Frontieres',\n    url: 'https://www.msf.org/ukraine',\n    img: 'icon-ukraine',\n  },\n  {\n    title: 'RAZOM',\n    url: 'https://www.razomforukraine.org/',\n    img: 'icon-ukraine',\n  },\n  {\n    title: 'Action against hunger',\n    url: 'https://www.actionagainsthunger.org/location/europe/ukraine/',\n    img: 'icon-ukraine',\n  },\n  {\n    title: 'World vision',\n    url: 'https://www.wvi.org/emergencies/ukraine',\n    img: 'icon-ukraine',\n  },\n  {\n    title: 'Serhiy Prytula Charity Foundation',\n    url: 'https://prytulafoundation.org/en',\n    img: 'icon-user',\n  },\n];\n\nconst markup = supportsTemplate(support);\nrefs.donations.innerHTML = markup;\n"],"names":["refs","onBoorgerMenuBtnClick","e","BASE","getCategories","URL","axios","getPopularBooks","getBooksByCategory","selectedCategory","params","getBookInfo","bookId","onCategoryClick","value","markup","categoriesTemplate","renderTopBooks","booksTemplate","popularBooksTemplate","onShopListBtnClick","shopList","event","bookInShop","book","indexBook","updateModalMarkup","openModal","idBook","markupBook","modalTemplate","showModal","onModalEsc","hideModal","onCloseModal","i","onBtnSeeMoreCLick","onBookClick","eventBook","id","support","supportsTemplate"],"mappings":"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"}