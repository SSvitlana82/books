{"version":3,"file":"storage-83df1bca.js","sources":["../../src/js/modules/refs.js","../../src/js/modules/books-api.js","../../src/img/icons.svg","../../src/js/modules/render-functions.js","../../src/js/modules/storage.js"],"sourcesContent":["export const refs = {\n  donations: document.querySelector('.js-support-list'),\n  boorgerMenuBtn: document.querySelector('.btn-burger-menu'),\n  boorgerMenuBackdrop: document.querySelector('.js-header-backdrop'),\n  categoryList: document.querySelector('.js-category-list'),\n  bookList: document.querySelector('.js-book-list'),\n  errorBook: document.querySelector('.error-img'),\n\n  modal: {\n    mainBackdrop: document.querySelector('.js-backdrop'),\n    closeBtn: document.querySelector('.js-modal-btn-close'),\n    message: document.querySelector('.js-message-modal'),\n    shopListBtn: document.querySelector('.js-btn-modal-buy'),\n    content: document.querySelector('.js-modal-content'),\n  },\n  /* themeBtn: document.querySelector(), */\n};\n","import axios from 'axios';\nconst BASE = 'https://books-backend.p.goit.global/books';\n\nexport async function getCategories() {\n  const URL = `${BASE}/category-list`;\n  const response = await axios.get(URL);\n  return response.data;\n}\nexport async function getPopularBooks() {\n  const URL = `${BASE}/top-books`;\n  const response = await axios.get(URL);\n  return response.data;\n}\nexport async function getBooksByCategory(selectedCategory) {\n  selectedCategory = selectedCategory.trim();\n  const params = { category: selectedCategory };\n  const URL = `${BASE}/category`;\n  const response = await axios.get(URL, { params });\n  return response.data;\n}\nexport async function getBookInfo(bookId) {\n  bookId = bookId.trim();\n  const URL = `${BASE}/${bookId}`;\n  const response = await axios.get(URL);\n  return response.data;\n}\n","export default \"__VITE_ASSET__f9984085__\"","import icons from '../../img/icons.svg';\n\nfunction categoryTemplate(category) {\n  return `<li class=\"category-item\">${category.list_name}</li>`;\n}\nexport function categoriesTemplate(array) {\n  return array.map(categoryTemplate).join('');\n}\n\nfunction bookTemlate({ book_image, author, title, _id }) {\n  return `<li class=\"book-item\" data-id=\"${_id}\">\n  <div class=\"book-item-img\">\n      <img src=\"${book_image}\" alt=\"bookname\"/></div>\n      <h3>${title}</h3>\n      <p>${author}</p>\n    </li>`;\n}\nexport function booksTemplate(array) {\n  return array.map(bookTemlate).join('');\n}\n\nfunction popularCategoryTemplate(topCategory) {\n  return `<li class=\"popular-top-book\">\n      <h3>${topCategory.list_name}</h3>\n      <ul class=\"top-book-list\">\n         ${booksTemplate(topCategory.books)}\n      </ul>\n      <button data-top=\"${topCategory.list_name}\">SEE MORE</button>\n    </li>`;\n}\n\nexport function popularBooksTemplate(array) {\n  return array.map(popularCategoryTemplate).join('');\n}\n\nfunction supportTemplate(supportObject, index) {\n  return `<li class=\"support-item\">\n      <a target=\"_blank\" href=\"${supportObject.url}\" class=\"support-item-link\">\n        <p class=\"support-item-name\">${index + 1}</p>\n        <svg class=\"support-item-logo\">\n        <use href=\".${icons}#${supportObject.img}\"></use>\n        </svg>\n      </a>\n    </li>`;\n}\n\nexport function supportsTemplate(array) {\n  return array.map(supportTemplate).join('');\n}\n\nexport function modalTemplate({\n  book_image,\n  author,\n  title,\n  buy_links,\n  description,\n}) {\n  return `<img\n          src=\"${book_image}\"\n          alt=\"книга\"\n        />\n        <ul class=\"list-modal\">\n          <li class=\"item-modal\">\n            <h2 class=\"name-modal\">${title}</h2>\n            <p class=\"author-modal\">${author}</p>\n            <p class=\"description-modal\">${description}\n            </p>\n            <ul class=\"buy-list-modal\">\n              ${modalLinksTemplate(buy_links)}\n            </ul>\n          </li>\n        </ul>`;\n}\nfunction modalLinksTemplate(buy_links) {\n  const arrayModal = ['Amazon', 'Apple_Books', 'Bookshop'];\n  const links = arrayModal.map(nameStore => {\n    return buy_links.find(\n      objectLink => objectLink.name.replaceAll(' ', '_') === nameStore\n    );\n  });\n  return links.map(modallinkTemplate).join('');\n}\n\nfunction modallinkTemplate(infoLink) {\n  if (!infoLink) {\n    return '';\n  }\n  return `<li class=\"item-buy\">\n                <a\n                  href=\"${infoLink.url}\"\n                  class=\"link-buy-modal\"\n                  >\n                  <svg class=\"icon-link\" width=\"18px\" height=\"18px\">\n              <use href=\".${icons}#${infoLink.name}\"></use>\n            </svg>\n                </a>\n              </li>`;\n}\n\nfunction shopBookTemlate({\n  book_image,\n  author,\n  title,\n  buy_links,\n  description,\n  list_name,\n  _id,\n}) {\n  console.log(buy_links);\n  return `<li class=\"item-shoplist\" data-id=\"${_id}\">\n      <div class=\"img-book\">\n        <img src=\"${book_image}\" alt=\"book\" />\n      </div>\n      <div class=\"book-info-shoplist\">\n        <div class=\"book-info-header\" >\n          <div class=\"book-name-header\">\n            <h2 class=\"book-title-header\">${title}</h2>\n            <h3 class=\"book-category-header\">${list_name}</h3>\n          </div>\n          <div class=\"icon-header\">\n            <svg class=\"icon-trash-header\" width=\"18px\" height=\"18px\">\n              <use href=\".${icons}#icon-x-close\"></use>\n            </svg>\n          </div> \n        </div>\n        <div class=\"book-desc-shoplist\">\n          <p>${description}</p>\n        </div>\n        <div class=\"book-footer\">\n          <div class=\"book-author-footer\"><p>${author}</p></div>\n          <ul class=\"book-link-footer\">${modalLinksTemplate(buy_links)}</ul>\n        </div>\n      </div>\n    </li>`;\n}\n\nexport function shopListTemlate(array) {\n  return array.map(shopBookTemlate).join('');\n}\n","import { refs } from './refs';\nimport { getBookInfo } from './books-api';\n\nrefs.modal.shopListBtn.addEventListener('click', onShopListBtnClick);\nconst shopList = JSON.parse(localStorage.getItem('shopListStorage')) || [];\n\nasync function onShopListBtnClick(event) {\n  const bookId = event.target.getAttribute('data-id');\n\n  await updateStorige(bookId);\n\n  updateModalMarkup(bookId);\n}\nexport function updateModalMarkup(bookId) {\n  const bookInShop = shopList.some(book => {\n    return book._id === bookId;\n  });\n\n  if (bookInShop === false) {\n    refs.modal.shopListBtn.textContent = 'ADD TO SHOPPING LIST';\n    refs.modal.message.classList.add('hidden');\n  } else {\n    refs.modal.shopListBtn.textContent = 'remove';\n    refs.modal.message.classList.remove('hidden');\n  }\n}\n\nexport async function updateStorige(bookId) {\n  const bookInShop = shopList.some(book => {\n    return book._id === bookId;\n  });\n  if (bookInShop === false) {\n    const book = await getBookInfo(bookId);\n    shopList.push(book);\n    localStorage.setItem('shopListStorage', JSON.stringify(shopList));\n  } else {\n    const indexBook = shopList.findIndex(book => {\n      return book._id === bookId;\n    });\n    shopList.splice(indexBook, 1);\n    localStorage.setItem('shopListStorage', JSON.stringify(shopList));\n  }\n}\n"],"names":["refs","BASE","getCategories","URL","axios","getPopularBooks","getBooksByCategory","selectedCategory","params","getBookInfo","bookId","icons","categoryTemplate","category","categoriesTemplate","array","bookTemlate","book_image","author","title","_id","booksTemplate","popularCategoryTemplate","topCategory","popularBooksTemplate","supportTemplate","supportObject","index","supportsTemplate","modalTemplate","buy_links","description","modalLinksTemplate","nameStore","objectLink","modallinkTemplate","infoLink","shopBookTemlate","list_name","shopListTemlate","onShopListBtnClick","shopList","event","updateStorige","updateModalMarkup","book","indexBook"],"mappings":"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"}